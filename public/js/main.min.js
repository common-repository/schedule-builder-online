"use strict";$(document).ready(function(){var o,t,i,P,C,z,r,w,S,I,n,c,d,H,N,W,F={en:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],sv:["Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag","Söndag"],es:["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],de:["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],pt:["segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado","domingo"],it:["Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato","Domenica"],fr:["lundi","mardi","mercredi","jeudi","vendredi","semedi","dimanche"],pl:["Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota","Niedziela"],ru:["понедельник","вторник","среда","четверг","пятница","суббота","воскресенье"]},a={en:["January","February","March","April","May","June","July","August","September","October","November","December"],sv:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],es:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],de:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],pt:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],it:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],fr:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],pl:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],ru:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},J={"12hour":["12 AM","1 AM","2 AM","3 AM","4 AM","5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 PM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM","7 PM","8 PM","9 PM","10 PM","11 PM","12 AM"],military:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"]},B=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],L=["12","1","2","3","4","5","6","7","8","9","10","11","12","1","2","3","4","5","6","7","8","9","10","11","12"],Y=["AM","AM","AM","AM","AM","AM","AM","AM","AM","AM","AM","AM","PM","PM","PM","PM","PM","PM","PM","PM","PM","PM","PM","PM","AM"],U=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],G=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],b={startDay:"0",endDay:"4",startTime:"8",endTime:"16",timeFormat:"12hour",timeMarks:"corners",startDate:"0",useBackground:"no",backgroundUrl:"",backgroundHeight:"",backgroundX:"",backgroundY:"",uniqueId:"",autoResize:"no"},R={0:{},1:{},2:{},3:{},4:{},5:{},6:{}},q=599,V="en",X=0,E=[];function l(){var e,s=(860-(1*(e=o<t||o==t?t-o+1:8-o+t)-1))/e;for(H=o;H<=t;H++)$(".sboDays."+w).append("<div class='sboDay "+F[V][H]+" "+w+"' style='width: "+s+"px';></div>"),"0"==i?($(".sboWeekDays."+w).append("<div class='sboWeekDay "+w+"' style='width: "+s+"px';><p>"+F[V][H]+"</p></div>"),$(".sboWeekDays."+w).css("height","29px")):($(".sboWeekDays."+w).append("<div class='sboWeekDay "+w+"' style='width: "+s+"px';><p>"+F[V][H]+"</p><p class='sboWeekDayDate'>"+i.date()+" "+a[V][i.get("month")]+"</p></div>"),$(".sboWeekDays."+w).css("height","54px"),i.add(1,"days")),6==o&&(o=0);d=C-P,"yes"==c||"yesUpload"==c?($(".sboTemplate."+w).css({"background-image":"url("+b.backgroundUrl+")","background-size":"auto "+b.backgroundHeight+"px","background-position-x":b.backgroundX,"background-position-y":b.backgroundY}),$(".sboWeekDays."+w).css("background","rgba(255, 255, 255, 0.75)"),$(".sboHours."+w).css("background","rgba(255, 255, 255, 0.75)"),$(".sboDays."+w).css("background","none")):"yesColor"==c&&($(".sboTemplate."+w).css("background-color",b.backgroundColor),$(".sboWeekDays."+w).css("background","rgba(255, 255, 255, 0.75)"),$(".sboHours."+w).css("background","rgba(255, 255, 255, 0.75)"),$(".sboDays."+w).css("background","transparent")),$(".sboHours."+w).height(d*z-1),$(".sboDays."+w).height(d*z-1),p(),"yes"==n&&(r=75,$(".sboDay."+w).each(function(){$(".sboDayObject."+w).each(function(){var e=$(this).find(".sboObjectName").outerHeight(!0)+$(this).find(".sboObjectText").outerHeight(!0);"inline"==I&&(e+=$(this).find(".timeMarkInline").outerHeight(!0));var s=e/$(this).height(),a=Math.ceil(s*z);r<=a&&(r=a)})}),z!=r&&(z=r,$(".sboHours."+w).height(d*z-1),$(".sboDays."+w).height(d*z-1),p())),$(window).trigger("resize"),h()}function p(){for($(".sboHours."+w).html(""),$(".sboDay."+w).each(function(){$(this).html("")}),H=P;H<C;H++)$(".sboHours."+w).append("<div class='sboHour "+w+"' style='height: "+z+"px;'><div class='sboHourText "+w+"'><p class='sboPHour "+w+"'>"+J[S][H]+"</p></div></div>");for(H=0;H<7;H++){var e=0;for(N in R[H])R[H].hasOwnProperty(N)&&e++;for(W=0;W<e;W++){var s,a,o,t=parseInt(R[H][W].startTime),i=parseInt(R[H][W].endTime);0==i&&(i=1440);var r=0,n=0;for(N=t;N<i;N++)n++;for(n=(n*(z/60)+1).toFixed(4),N=60*P;N<t;N++)r++;var c=(r=(r*(z/60)-1).toFixed(4))+n,d=decodeURIComponent(R[H][W].objectName),b=decodeURIComponent(R[H][W].objectInfo);b=b.split("\n").join("<br />");var l=R[H][W].backgroundColor,p=R[H][W].textColor1,u=R[H][W].textColor2,h=parseInt(R[H][W].objectNumber);if(X<h&&(X=h),!(r<-1||q+5<c)){var g=t%60,m=(t-g)/60,M=i%60,y=(i-M)/60;o="military"==S?(s=J.military[U.indexOf(m)]+":"+B[G.indexOf(g)])+" - "+(a=J.military[U.indexOf(y)]+":"+B[G.indexOf(M)]):(s=L[U.indexOf(m)]+":"+B[G.indexOf(g)]+" "+Y[U.indexOf(m)])+" - "+(a=L[U.indexOf(y)]+":"+B[G.indexOf(M)]+" "+Y[U.indexOf(y)]);var v,k=0;for(N=0;N<e;N++){var f=parseInt(R[H][N].startTime),D=parseInt(R[H][N].endTime),x=R[H][N].objectNumber;if(D<=t||i<=f||h==x||(k++,$("."+x+"."+w).is(":visible")&&(v=x)),"corners"==I&&h!=x){var O=$("."+x+"."+w).find(".timeMarkTop").html();s==$("."+x+"."+w).find(".timeMarkBottom").html()?E.push(h):a==O&&E.push(x)}}var T="";T=0==k?"<div class='sboDayObject "+h+" "+w+"' style='height: "+n+"px; top: "+r+"px; background-color: "+l+";'><div class='sboObjectPContainer "+w+"'><p class='sboObjectName "+w+"' style='color: "+p+";'>"+d+"</p><p class='sboObjectText "+w+"' style='color: "+u+";'>"+b+"</p></div></div>":$("."+v).is(":visible")&&parseInt($("."+v)[0].style.width)<100&&""==$("."+v)[0].style.left?"<div class='sboDayObject "+h+" "+w+"' style='width: 50%; left: 50%; height: "+n+"px; top: "+r+"px; background-color: "+l+"; border-left: 1px solid;'><div class='sboObjectPContainer "+w+"'><p class='sboObjectName "+w+"' style='color: "+p+";'>"+d+"</p><p class='sboObjectText "+w+"' style='color: "+u+";'>"+b+"</p></div></div>":"<div class='sboDayObject "+h+" "+w+"' style='width: 50%; height: "+n+"px; top: "+r+"px; background-color: "+l+";'><div class='sboObjectPContainer "+w+"'><p class='sboObjectName "+w+"' style='color: "+p+";'>"+d+"</p><p class='sboObjectText "+w+"' style='color: "+u+";'>"+b+"</p></div></div>",s="<span class='timeMarkTop timeMarkTop"+h+" "+w+"'>"+s+"</span>",a="<span class='timeMarkBottom timeMarkBottom"+h+" "+w+"'>"+a+"</span>",o="<span class='timeMarkInline timeMarkInline"+h+" "+w+"'>"+o+"</span>";var A="."+F[V][H]+"."+w;$(A).append(T);var j="."+h+".sboDayObject."+w;$(j).append(s),$(j).append(a),$(j).find(".sboObjectPContainer").append(o)}}}X++,function(){for("corners"==I||"yes"==I?$(".timeMarkTop ."+w+", .timeMarkBottom."+w).each(function(){$(this).css("display","block")}):($(".timeMarkTop ."+w+", .timeMarkBottom."+w).each(function(){$(this).css("display","none")}),$(".timeMarkInline."+w).each(function(){$(this).css("display","block")})),H=0;H<E.length;H++)$(".timeMarkTop"+E[H]+"."+w).hide()}(),"none"!=$(".sboTemplate."+w).css("background-image")?$(".sboDayObject."+w).each(function(){var e=$(this).css("background-color");-1<!e.indexOf("rgba")&&-1<!e.indexOf("0.75")&&(e=e.replace(")",", 0.75)").replace("rgb","rgba"),$(this).css("background-color",e))}):$(".sboDayObject."+w).each(function(){var e=$(this).css("background-color");e=e.replace(",0.75","").replace("rgba","rgb"),$(this).css("background-color",e)})}var u=[];function h(){0<u.length&&$.getScript("https://schedulebuilder.org/schedules/"+u[0]+".js").done(function(e,s){var a=$(".sboTemplate."+u[0]).attr("class").split(" ");u.splice(0,1),w=a[1],b=dbSchedule,R=dbObjects,X=0,E=[],o=b.startDay,t=b.endDay,"0"!=(i=b.startDate)&&(i=moment(i.substring(0,10),"YYYY-MM-DD")),P=parseInt(b.startTime),C=parseInt(b.endTime),z=75,S=b.timeFormat,I=b.timeMarks,n=b.autoResize,c=b.useBackground,V=a[2],d=0,"null",$(".sboTemplate."+w).append('<div class="sboWeekDays '+w+'"><div class="leftScheduleCorner '+w+'"></div></div><div class="sboHours '+w+'" style="height: 599px;"><div class="startTimeMarker '+w+'"></div><div class="endTimeMarker '+w+'"></div></div><div class="sboDays '+w+'" style="height: 599px;"></div>'),l()})}$(".sboTemplate").each(function(){var e=$(this).attr("class").split(" ");w=e[1],u.push(w)}).promise().done(function(){h()});var e=0;$(window).resize(function(){$(".sboTemplate").each(function(){$(this).parent().width()<893?(e=$(this).parent().width()/893,$(this).css({transform:"scale("+e+")"}),$(this).parent().height($(this).height()*e)):$(this).css({transform:"none"})})}),$(".sboToggle").click(function(){$(this).parent().hasClass("sboToggled")?($(this).parent().removeClass("sboToggled",1e3,function(){$(this).parent().height($(this).height()*e)}),$(this).html("Click to collapse &#x25B2;")):($(this).parent().addClass("sboToggled",1e3,function(){$(this).parent().height($(this).height()*e)}),$(this).html("Click to expand &#x25BC;"),$("html,body").animate({scrollTop:$($(this).parent()).offset().top-100},"slow"))})});